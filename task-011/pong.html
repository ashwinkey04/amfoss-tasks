<!doctype html>
<html>

<head>
    <title>Pong!</title>
    <script src="script.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link href="https://fonts.googleapis.com/css?family=Manjari|Dosis|Squada+One&display=swap" rel="stylesheet">

    <style>
        h2 {
            text-align: center;
            align-content: center;
            font-family: Dosis;
        }
        div{
            text-align: center;
            align-self: center;
            font-family: Dosis;
            margin-top: 2vw;
        }

        canvas {
            background: #00566b;
            display: block;
            margin: auto;
            border: 2px solid rgb(0, 0, 0)
        }
    </style>
</head>

<body>
    <h2>Pong!</h2>
    <div id="name1"></div>
    <div id="name2"></div>
    <canvas id="gameCanvas" width="800" height="450"></canvas>
    <div id="butt">
    <button id="stop" type="button" class="btn btn-outline-success"
                >Finish</button>
    </div>
    <script>
        var canvas = document.getElementById("gameCanvas");
        var ctx = canvas.getContext("2d");
        var x = canvas.width / 2;
        var y = canvas.height - 30;
        var dx = 4;
        var dy = -4;
        var ballRadius = 10;

        // left player paddle
        var leftPaddleHeight = 120;
        var leftPaddleWidth = 15;
        var leftPaddleX = 5;
        var leftPaddleY = canvas.height / 2 - leftPaddleHeight / 2;

        // Right player paddle
        var rightPaddleHeight = 120;
        var rightPaddleWidth = 15;
        var rightPaddleX = canvas.width - (rightPaddleWidth + 5);
        var rightPaddleY = canvas.height / 2 - rightPaddleHeight / 2;

        // boolean to handle pressed keys
        var leftUpPressed = false;
        var leftDownPressed = false;
        var rightUpPressed = false;
        var rightDownPressed = false;

        var leftScore = 0;
        var rightScore = 0;

        function keyDownHandler(e) {
            if (e.keyCode == 87) {
                leftUpPressed = true;
            }
            else if (e.keyCode == 83) {
                leftDownPressed = true;
            }
            if (e.keyCode == 38) {
                rightUpPressed = true;
            }
            else if (e.keyCode == 40) {
                rightDownPressed = true;
            }
        }

        function keyUpHandler(e) {
            if (e.keyCode == 87) {
                leftUpPressed = false;
            }
            else if (e.keyCode == 83) {
                leftDownPressed = false;
            }
            if (e.keyCode == 38) {
                rightUpPressed = false;
            }
            else if (e.keyCode == 40) {
                rightDownPressed = false;
            }
        }

        function drawBall() {
            ctx.beginPath();
            ctx.arc(x, y, ballRadius, 0, 3.141 * 2);
            ctx.fillStyle = "white";
            ctx.fill();
            ctx.closePath();
        }

        function drawScores() {
            ctx.font = "30px Dosis";
            ctx.fillStyle = "white";
            ctx.fillText(leftScore, (canvas.width / 2) - 80, 80);
            ctx.fillText(rightScore, (canvas.width / 2) + 40, 80);
        }

        function collisionsWithLeftPaddle() {
            if ((x - ballRadius) <= 5 + leftPaddleWidth) {
                if (y > leftPaddleY && y < leftPaddleY + leftPaddleHeight)
                    dx = -dx;
                else if ((x - ballRadius) <= 0) {
                    rightScore++;
                    //alert("Game Over");
                    x = canvas.width / 2;
                    y = canvas.height / 2;
                    dx = -dx;
                    dy = -dy;
                    //         document.location.reload();
                }
            }
        }

        function collisionsWithRightPaddle() {
            if ((x + ballRadius) >= canvas.width - (rightPaddleWidth + 5)) {
                if (y > rightPaddleY && y < rightPaddleY + rightPaddleHeight)
                    dx = -dx;
                else if (x + ballRadius >= canvas.width) {
                    leftScore++;
                    //alert("Game Over");
                    x = canvas.width / 2;
                    y = canvas.height / 2;
                    dx = -dx;
                    dy = -dy;
                    //document.location.reload();
                }
            }
        }

        function computeCollisionsWithWallsAndPaddle() {
            collisionsWithLeftPaddle();
            collisionsWithRightPaddle();
            if (((y - ballRadius) <= 0) || ((y + ballRadius) >= canvas.height)) {
                dy = -dy;
            }
        }

        function drawLeftPaddle() {
            ctx.beginPath();
            ctx.rect(leftPaddleX, leftPaddleY, leftPaddleWidth, leftPaddleHeight);
            ctx.fillStyle = "white";
            ctx.fill();
            ctx.closePath();
            if (leftDownPressed && leftPaddleY < canvas.height - leftPaddleHeight) {
                leftPaddleY += 7;
            }
            else if (leftUpPressed && leftPaddleY > 0) {
                leftPaddleY -= 7;
            }
        }

        function drawRightPaddle() {
            ctx.beginPath();
            ctx.rect(rightPaddleX, rightPaddleY, rightPaddleWidth, rightPaddleHeight);
            ctx.fillStyle = "white";
            ctx.fill();
            ctx.closePath();
            if (rightDownPressed && rightPaddleY < canvas.height - rightPaddleHeight) {
                rightPaddleY += 7;
            }
            else if (rightUpPressed && rightPaddleY > 0) {
                rightPaddleY -= 7;
            }
        }

        function drawScene() {
            ctx.beginPath();
            ctx.rect(canvas.width / 2 - 1, 0, 3, canvas.height);
            ctx.fillStyle = "white";
            ctx.fill();
            ctx.closePath();
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawScores();
            drawScene();
            drawLeftPaddle();
            drawRightPaddle();
            drawBall();
            computeCollisionsWithWallsAndPaddle();
            x += dx;
            y += dy;
        }

        setInterval(draw, 10);
        document.addEventListener("keydown", keyDownHandler, false);
        document.addEventListener("keyup", keyUpHandler, false);
    </script>

</body>

</html>